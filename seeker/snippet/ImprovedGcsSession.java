//date: 2023-04-06T16:59:23Z
//url: https://api.github.com/gists/a0847506f0b6e33e16926773d1f7adfd
//owner: https://api.github.com/users/pziobron

public class ImprovedGcsSession implements Session<BlobInfo> {
  ...
  @Override
  public void write(InputStream inputStream, String destination) throws IOException {
    String[] tokens = "**********"
 "**********"  "**********"  "**********"  "**********"  "**********"A "**********"s "**********"s "**********"e "**********"r "**********"t "**********". "**********"s "**********"t "**********"a "**********"t "**********"e "**********"( "**********"t "**********"o "**********"k "**********"e "**********"n "**********"s "**********". "**********"l "**********"e "**********"n "**********"g "**********"t "**********"h "**********"  "**********"= "**********"= "**********"  "**********"2 "**********", "**********"  "**********"" "**********"C "**********"a "**********"n "**********"  "**********"o "**********"n "**********"l "**********"y "**********"  "**********"w "**********"r "**********"i "**********"t "**********"e "**********"  "**********"t "**********"o "**********"  "**********"f "**********"i "**********"l "**********"e "**********"s "**********", "**********"  "**********"n "**********"o "**********"t "**********"  "**********"b "**********"u "**********"c "**********"k "**********"e "**********"t "**********"s "**********". "**********"" "**********") "**********"; "**********"

    BlobInfo gcsBlobInfo = "**********"

    try (InputStream is = inputStream) {
      try (WriteChannel channel = this.gcs.writer(gcsBlobInfo)) {
        channel.setChunkSize(256 * 1024); //256KB
        channel.write(ByteBuffer.wrap(StreamUtils.copyToByteArray(is)));
      }
    }
  }
  ...
}