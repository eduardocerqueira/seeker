#date: 2022-12-06T16:59:42Z
#url: https://api.github.com/gists/4bd067ab3007c66bb14642fc0c681c8b
#owner: https://api.github.com/users/TheoOiry

#!/bin/sh
# to put in .git/hooks/pre-commit with execution rights

set -eu

if ! cargo fmt -- --check
then
    echo "There are some code style issues."
    echo "Run cargo fmt first."
    exit 1
fi

if ! cargo clippy --benches --tests  --all-targets -- -D warnings
then
    echo "There are some clippy issues."
    exit 1
fi

exit 0