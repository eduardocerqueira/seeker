#date: 2023-01-26T17:08:46Z
#url: https://api.github.com/gists/9a46fec965b1455ed215f8c9c7768781
#owner: https://api.github.com/users/SergeyL-1979

#!/usr/bin/env python
# -*- coding: utf-8 -*-
from abc import ABC, abstractmethod


class Storage(ABC): # Нужно ли сюда делать наследование от ABC?
    @abstractmethod
    def add(self, name, qnt):
        pass
    @abstractmethod
    def remove(self, name, qnt):
        pass
    @abstractmethod
    def get_free_space(self):
        pass
    @abstractmethod
    def get_items(self):
        pass
    @abstractmethod
    def get_unique_items_count(self):
        pass


class Store(Storage):
    # goods_items = {}  # ИЛИ ТУТ ПРАВИЛЬНО ДЕЛАТ ПОЛЕ
    storage_quantity = 200

    def __init__(self):
        self.goods_items = dict()

    @classmethod
    def _get_total(cls):
        return cls.storage_quantity

    @classmethod
    def _set_total(cls, qnt):
        cls.storage_quantity = qnt

    @classmethod
    def get_free_space(cls):  # - вернуть количество свободных мест
        return cls.storage_quantity

    def add(self, name, qnt):
        if qnt < self._get_total():
            self.storage_quantity = (self.storage_quantity + qnt)
            self._set_total(self._get_total() + qnt)
        else:
            self._set_total(self._get_total() - self.storage_quantity)
            self.storage_quantity = 0

        is_found = False
        if self.get_free_space() > qnt:
            for key in self.goods_items.keys():
                if name == key:
                    self.goods_items[key] = self.goods_items[key] + qnt
                    is_found = True
            if not is_found:
                self.goods_items[name] = qnt
            print("Товар добавлен")
        else:
            print(f"Товар не может быть добавлен, так как есть место только на {self.get_free_space()} товаров")

    def remove(self, name, qnt):
        if qnt < self.storage_quantity:
            self.storage_quantity = (self.storage_quantity - qnt)
            self._set_total(self._get_total() + qnt)
        else:
            self._set_total(self._get_total() - self.storage_quantity)
            self.storage_quantity = 0

        for key in self.goods_items.keys():
            if name == key:
                if self.goods_items[key] - qnt >= 0:
                    self.goods_items[key] = self.goods_items[key] - qnt
                else:
                    print(f"Слишком мало {name}")
            else:
                print(f"{name.title()} - нет на складе")

    def get_items(self):  # - возвращает содержание склада в словаре {товар: количество}
        return self.goods_items

    def get_unique_items_count(self):  # - возвращает количество уникальных товаров
        pass


if __name__ == '__main__':
    # store = {"печенье": 5, "конфеты": 4, "халва": 3, "шоколад": 6, "мороженное": 2}
    # warehouse = {"коробка": 35, "лента": 10, "скотч": 20, "бумага": 10, "пленка": 20}

    # storage = Shop()
    # for item, value in store.items():
    #     storage.add_item(item, value)

    # stock = Store()
    # for item, value in warehouse.items():
    #     stock.add(item, value)

    print("Всего на складе: ", Store.storage_quantity)
    print(Store.get_free_space())
    stock = Store()
    stock.add('s', 2)
    stock.add('sa', 1)
    stock.add('sas', 1)
    print(stock.goods_items, 'lj')
    print("Число отгруженных товаров возросло до:", stock.storage_quantity)
    # print("Остаток на складе: ", storage.storage_quantity)
    # remove_stor = Store()
    stock.remove("s", 2)
    print(stock.get_free_space(), 're')
    print("Число отгруженных товаров сократилось до:", stock.storage_quantity)
    # print("Остаток на складе: ", remove_stor.storage_quantity)
    # print(remove_stor.get_free_space())
