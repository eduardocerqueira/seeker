#date: 2024-06-20T16:58:09Z
#url: https://api.github.com/gists/d1148a5108370e136f4802ed0023ba40
#owner: https://api.github.com/users/imbgar

#!/bin/bash

# Check if both parameter group names are provided
if [ "$#" -ne 2 ]; then
    echo "Usage: $0 <parameter-group-name-1> <parameter-group-name-2>"
    exit 1
fi

# Fetch parameters for both groups
params1=$(aws rds describe-db-parameters --db-parameter-group-name "$1" --query "Parameters[].[ParameterName,ParameterValue]" --output json)
params2=$(aws rds describe-db-parameters --db-parameter-group-name "$2" --query "Parameters[].[ParameterName,ParameterValue]" --output json)

# Use jq to sort them by ParameterName
echo "$params1" | jq -S '.' > temp1.json
echo "$params2" | jq -S '.' > temp2.json

# Use diff to compare the sorted parameters
diff temp1.json temp2.json

# Clean up temporary files
rm temp1.json temp2.json

