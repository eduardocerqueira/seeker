#date: 2024-04-03T16:51:24Z
#url: https://api.github.com/gists/ba6849d3f81211231cc8a380edc02327
#owner: https://api.github.com/users/BlowYourBrain

#!/bin/bash

if [ $1 == "1" ]; then
    echo "start proxy on 127.0.0.1:8888"
    adb reverse tcp:8888 tcp:8888
    adb shell settings put global http_proxy 127.0.0.1:8888
    adb shell settings put global https_proxy 127.0.0.1:8888
else
    echo "stop proxy on 127.0.0.1:8888"
    adb reverse --remove tcp:8888
    adb shell settings put global http_proxy :0
    adb shell settings put global https_proxy :0
fi
