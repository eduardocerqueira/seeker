#date: 2025-12-05T17:09:14Z
#url: https://api.github.com/gists/e2074b0c1c062e88d0e8d650554651da
#owner: https://api.github.com/users/rrobles9112

#!/bin/bash

# Usage:
#   ./unlock_during_scrcpy.sh            # if only one ADB device is connected
#   ./unlock_during_scrcpy.sh SERIAL_ID  # if you have multiple devices (use `adb devices` to get SERIAL_ID)

SERIAL="$1"
if [ -n "$SERIAL" ]; then
  ADB="adb -s $SERIAL"
else
  ADB="adb"
fi

echo "[unlock] Waking device..."
$ADB shell input keyevent KEYCODE_WAKEUP
sleep 1

echo "[unlock] Swiping up to show PIN pad..."
# Swipe coordinates tuned for your device (Xiaomi POCO, 1224x2712). Adjust if needed.
$ADB shell input swipe 612 1356 612 200 300
sleep 1

echo "[unlock] Entering PIN 0745..."
$ADB shell input keyevent KEYCODE_0
sleep 0.2
$ADB shell input keyevent KEYCODE_7
sleep 0.2
$ADB shell input keyevent KEYCODE_4
sleep 0.2
$ADB shell input keyevent KEYCODE_5
sleep 0.5
$ADB shell input keyevent KEYCODE_ENTER
sleep 1

echo "[unlock] Done. If SCRCPY is running, the screen should be unlocked now.
"