#date: 2024-01-26T17:06:16Z
#url: https://api.github.com/gists/5d8d99a70fa839e2798a4980449a86f7
#owner: https://api.github.com/users/jednano

#!/bin/bash

relative="~/.local/bin/protoc-gen-mypy"
plugin=$(eval readlink -m "$relative")

compile_proto() {
  protoc --experimental_allow_proto3_optional --plugin=protoc-gen-mypy=$plugin --python_out=. --mypy_out=. $@
}

compile_proto *.proto
compile_proto **/*.proto
