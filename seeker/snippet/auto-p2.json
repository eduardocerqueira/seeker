#date: 2021-12-10T16:53:58Z
#url: https://api.github.com/gists/00473592cbca8d32faba550765737b17
#owner: https://api.github.com/users/alexmariscalr

#!/usr/bin/python
# coding=utf-8

import json
import os
import subprocess
orden=str(sys.argv[1])

def crear():
    ns = 0
    servidores={}
    servidores.append({"num_serv":ns})

    #Por defecto el número de servidores es 3
    if len(sys.argv)==2:
        ns=3

   #sys.argv[2] es el segundo parámetro de la línea de comandos
   #si está entre 1 y 5, se configura ese número de servidores
    if int(sys.argv[2])>=1 and int(sys.argv[2])<=5:
        ns=int(sys.argv[2])

    else: 
        print("Error: el número de servidores es mayor que 5")
        sys.exit

    with open('auto-p2.json','w') as json_file:
        json.dump(servidores,json_file)

    run('cp servidores.json /mnt/tmp/archivos-configuracion/auto-p2.json', shell=True)
    run('qemu-img create -f qcow2 -b cdps-vm-base-p2.qcow2 lb.qcow2',shell=True)
    run('qemu-img create -f qcow2 -b cdps-vm-base-p2.qcow2 c1.qcow2',shell=True)




    






    





